@page "/Activity"
@using OGEInflow.Client.Services
<link rel="stylesheet" href="css/activity.css">


<PageTitle>Activity</PageTitle>

<div class="activity-header">
    <h1>Activity</h1>
    <div>
        <MudText Typo="Typo.body1">Scans: @filteredReaderEvents.Count</MudText>
        <MudText Typo="Typo.body1">People: @PersonCountFromFilter</MudText>
        <MudText Typo="Typo.body1">Unique People per Day: @AvgUniquePeople</MudText>
    </div>
</div>


<div class="dateFilter">
    <h2 class="timeframe">TimeFrame</h2>

    <!-- Start Date Picker -->
    <div class="datepicker-group">
        <div class="datepicker">
            <MudDatePicker @ref="StartPicker"
                           Label="Start Date"
                           MinDate="@MinDate"
                           MaxDate="@EndDate"
                           AutoClose="@_autoClose"
                           DateChanged="@RefreshGraphs"
            >
                <PickerActions>
                    <MudButton Class="mr-auto align-self-start" OnClick="@(() => StartPicker.ClearAsync())">Clear</MudButton>
                    <MudButton OnClick="@(() => StartPicker.CloseAsync(false))">Cancel</MudButton>
                    <MudButton Color="Color.Primary" OnClick="@(() => StartPicker.CloseAsync())">Ok</MudButton>
                </PickerActions>
            </MudDatePicker>
        </div>

        <h3 class="timeframe_between">to</h3>

        <!-- End Date Picker -->
        <div class="datepicker">
            <MudDatePicker @ref="@EndPicker"
                           Label="End Date"
                           MinDate="@StartDate"
                           MaxDate="@MaxDate"
                           AutoClose="@_autoClose"
                           DateChanged="@RefreshGraphs">
                <PickerActions>
                    <MudButton Class="mr-auto align-self-start" OnClick="@(() => EndPicker.ClearAsync())">Clear</MudButton>
                    <MudButton OnClick="@(() => EndPicker.CloseAsync(false))">Cancel</MudButton>
                    <MudButton Color="Color.Primary" OnClick="@(() => EndPicker.CloseAsync())">Ok</MudButton>
                </PickerActions>
            </MudDatePicker>
        </div>
    </div>

    <div class="nav-group-container">
        <MudNavGroup Title="Location" Icon="@Icons.Material.Filled.Place">
            <MudNavLink Href="map.html">Map</MudNavLink>
            <MudNavLink Href="contact.html">Contact Info</MudNavLink>
        </MudNavGroup>
    </div>
</div>




<div class="grid-container">
    <!-- Warnings -->
    <div class="grid-item">
        <h2>Warning Flags</h2>
        <div class="warning-container">
            <MudImage src="img/warning.png" Class="warning-container-image"></MudImage>
            <MudText Typo="Typo.h5">@WarningManager.FlattenedHighReaderUsageWarnings.Count() counts of high scanner usage</MudText>
        </div>
        <div class="warning-container">
            <MudImage src="img/warning.png" Class="warning-container-image"></MudImage>
            <MudText Typo="Typo.h5">@WarningManager.FlattenedDoubleScanWarnings.Count() counts of double scans</MudText>
        </div>
        
    </div>
    <!-- Most Active Hours-->
    <div class="grid-item">
        <MudChart ChartType="ChartType.Bar" ChartSeries="@RankedHoursGraphs.Series"
                  XAxisLabels="@RankedHoursGraphs.Labels" Width="100%" Height="300px"
                  ChartOptions="RankedHoursGraphs.Options"></MudChart>
    </div>

    <!-- Scan Activations -->
    <div class="grid-item">
        <MudChart ChartType="ChartType.Line" ChartSeries="@ScanActivationsGraph.Series"
                  XAxisLabels="@ScanActivationsGraph.Labels" Width="100%" Height="300px"
                  ChartOptions="ScanActivationsGraph.Options"></MudChart>
    </div>
    <!-- Most Active Reader -->
    <div class="grid-item">
        <MudChart ChartType="ChartType.Bar" ChartSeries="@RankedReaderIDGraph.Series"
                  XAxisLabels="@RankedReaderIDGraph.Labels" Width="100%" Height="350px"
                  ChartOptions="RankedReaderIDGraph.Options"></MudChart>
    </div>

    <!-- Most Active People Ranked -->
    <div class="grid-item">
        <MudChart ChartType="ChartType.Bar" ChartSeries="@RankedPersonIDGraph.Series"
                  XAxisLabels="@RankedPersonIDGraph.Labels"Width="100%" Height="80%"
                  ChartOptions="RankedPersonIDGraph.Options"></MudChart>
    </div>
    <!-- Most Active Panels Ranked -->
    <div class="grid-item">
        <MudChart ChartType="ChartType.Bar" ChartSeries="@RankedMachineGraph.Series"
                  XAxisLabels="@RankedMachineGraph.Labels" Width="100%" Height="350"
                  ChartOptions="RankedMachineGraph.Options"></MudChart>
    </div>

</div>
